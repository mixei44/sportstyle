{% extends 'base.html' %}
{% load static %}
 <link rel="stylesheet" href="{% static '/company/css/product.css' %}">
{% block title %}SportStyle - Каталог{% endblock %}
{% block content %}
    <div class="cards">
        <form method="get">
            {{ filter.form.as_p }}
            <input type="submit" />
        </form>
        <form method="get">
            <button>Отчистить</button>
        </form>

        {% if filter.qs %}
            {% for product in filter.qs %}
                <div class="card">
                    {{ product.title }}<br/>
                    {{ product.price }}P

                    <!-- карусель фото  -->
                    <div class="d-flex">

                        <div class="all">
                            <div class="slideshow-container">

                                <div class="mySlides fade">
                                  <div class="numbertext">1 / 3</div>
                                  <img src="img_nature_wide.jpg" style="width:100%">
                                </div>

                                
                                <a class="prev" onclick="plusSlides(-1)">❮</a>
                                <a class="next" onclick="plusSlides(1)">❯</a>
                                
                                </div>
                                <br>
                                
                                <script>
                                var slideIndex = 1;
                                showSlides(slideIndex);
                                
                                function plusSlides(n) {
                                  showSlides(slideIndex += n);
                                }
                                
                                function currentSlide(n) {
                                  showSlides(slideIndex = n);
                                }
                                
                                function showSlides(n) {
                                  var i;
                                  var slides = document.getElementsByClassName("mySlides");
                                  var dots = document.getElementsByClassName("dot");
                                  if (n > slides.length) {slideIndex = 1}    
                                  if (n < 1) {slideIndex = slides.length}
                                  for (i = 0; i < slides.length; i++) {
                                      slides[i].style.display = "none";  
                                  }
                                  for (i = 0; i < dots.length; i++) {
                                      dots[i].className = dots[i].className.replace(" active", "");
                                  }
                                  slides[slideIndex-1].style.display = "block";  
                                  dots[slideIndex-1].className += " active";
                                }
                                </script>
                        {% if product.photos.all %}
                            {% for photo in product.photos.all %}
                                <img src="{{ photo.photo.url }}" width="200" height="200" alt="..." style="object-fit: cover;">
                            {% endfor %}
                        {% endif %}
                    </div>

                </div>
            {% endfor %}
        {% else %}
                <h2 style="text-align: center;">Ничего не найдено :(</div>
        {% endif %}
    </div>
{% endblock %}
